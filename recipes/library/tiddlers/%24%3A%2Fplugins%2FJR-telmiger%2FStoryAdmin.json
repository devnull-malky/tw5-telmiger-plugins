{"title":"$:/plugins/JR-telmiger/StoryAdmin","author":"Jan und Thomas","core-version":">=5.1.18","description":"Story Admin – save and load story lists","list":"readme","name":"StoryAdmin – save and load story lists","plugin-type":"plugin","source":"https://tid.li/tw5/plugins.html","version":"0.1.3","dependents":"","type":"application/json","text":"{\n    \"tiddlers\": {\n        \"$:/plugins/JR-telmiger/StoryAdmin/ViewTemplate\": {\n            \"title\": \"$:/plugins/JR-telmiger/StoryAdmin/ViewTemplate\",\n            \"created\": \"20190104191033297\",\n            \"creator\": \"Thomas Elmiger\",\n            \"list-after\": \"$:/core/ui/ViewTemplate/body\",\n            \"modified\": \"20200219130956386\",\n            \"modifier\": \"Thomas Elmiger\",\n            \"tags\": \"$:/tags/ViewTemplate\",\n            \"type\": \"text/vnd.tiddlywiki\",\n            \"text\": \"<$list filter=\\\"[all[current]has[story]]\\\">\\n<div>\\n<<loadStoryButton>>\\n</div>\\n</$list>\"\n        },\n        \"$:/plugins/JR-telmiger/StoryAdmin/admin.css\": {\n            \"title\": \"$:/plugins/JR-telmiger/StoryAdmin/admin.css\",\n            \"caption\": \"StoryAdmin Styles (CSS)\",\n            \"created\": \"20190102193452283\",\n            \"creator\": \"Thomas Elmiger\",\n            \"modified\": \"20200219130956362\",\n            \"modifier\": \"Thomas Elmiger\",\n            \"tags\": \"$:/tags/Stylesheet\",\n            \"type\": \"text/vnd.tiddlywiki\",\n            \"text\": \".tc-sidebar-lists .tc-tab-content .story-manager label {\\n   width: initial;\\n}\\n\\n/* Save */\\n\\n.savebox button {\\n   font-weight: 400;\\n}\\n\\n.savewarning {\\n   border: 1px solid red;\\n   padding: .25rem;\\n   padding-left: .75rem;\\n}\\n\\n.savebox {\\n   max-width: 20rem;\\n   margin-top: 1rem;\\n}\\n\\n\\n/* Story Manager */\\n\\n.story-manager input {\\n   width: 16rem;\\n}\\n\\n.story-manager select {\\n   width: 16rem;\\n}\\n\\ndiv.story-manager  {\\n   padding: 10px 0 10px 0;\\n   border-bottom: 1px dashed lightgray;\\n   max-width: 28rem;\\n}\"\n        },\n        \"$:/plugins/JR-telmiger/StoryAdmin/append\": {\n            \"title\": \"$:/plugins/JR-telmiger/StoryAdmin/append\",\n            \"caption\": \"StoryAdmin Append\",\n            \"created\": \"20190109230425104\",\n            \"creator\": \"Thomas Elmiger\",\n            \"modified\": \"20200219130956343\",\n            \"modifier\": \"Thomas Elmiger\",\n            \"tags\": \"$:/tags/Macro\",\n            \"type\": \"text/vnd.tiddlywiki\",\n            \"text\": \"\\\\define appendStoryBtn(snap)\\n<$list filter=\\\"[<__snap__>has[story]]\\\" emptyMessage=\\\"<span class='error-message' style='display:none'>Error: Story not found</span>\\\">\\n<$wikify name=\\\"story\\\" text=\\\"{{{ [<__snap__>get[story]] }}}\\\">\\n<$button class=\\\"tc-btn-invisible\\\" tooltip=<<story>>>\\n<$list filter=\\\"[enlist<story>]\\\">\\n<$action-navigate $to=<<currentTiddler>> $scroll=\\\"no\\\"/>\\n</$list>\\n<$action-sendmessage $message=\\\"tm-notify\\\" $param=\\\"$:/plugins/JR-telmiger/StoryAdmin/confirm-append\\\"/>\\n{{$:/core/images/new-button}} Append to story\\n</$button>\\n</$wikify>\\n</$list>\\n\\\\end\\n\\n<$set name=\\\"snap\\\" value={{$:/plugins/JR-telmiger/StoryAdmin/settings##load-storyname}}>\\n<$macrocall $name=\\\"appendStoryBtn\\\" snap=<<snap>>/>\\n</$set>\\n\"\n        },\n        \"$:/plugins/JR-telmiger/StoryAdmin/category-new\": {\n            \"title\": \"$:/plugins/JR-telmiger/StoryAdmin/category-new\",\n            \"caption\": \"StoryAdmin Add Category\",\n            \"created\": \"20190102202106899\",\n            \"creator\": \"Thomas Elmiger\",\n            \"modified\": \"20200219130956537\",\n            \"modifier\": \"Thomas Elmiger\",\n            \"type\": \"text/vnd.tiddlywiki\",\n            \"text\": \"<label>Category name: <$edit-text tag=\\\"input\\\" tiddler=\\\"$:/plugins/JR-telmiger/StoryAdmin/settings\\\" index=\\\"new-category\\\"/></label> &nbsp; \\n<$set name=\\\"id\\\" value={{$:/plugins/JR-telmiger/StoryAdmin/settings##new-category}}>\\n<$list filter=\\\"[<id>!has[title]]\\\" emptyMessage=\\\"<br>This name is already taken.\\\">\\n<$button tooltip=\\\"Add category\\\" class=\\\"tc-btn-invisible te-btn-mini\\\">\\n<$set name=\\\"base-tag\\\" value={{$:/plugins/JR-telmiger/StoryAdmin/settings##story-tag}}>\\n<$action-createtiddler $basetitle=<<id>> tags=<<base-tag>> text=\\\"\\\" caption=<<id>>/>\\n<$action-setfield $tiddler=\\\"$:/plugins/JR-telmiger/StoryAdmin/settings\\\" $index=\\\"new-category\\\" $value=\\\"\\\"/>\\n{{$:/core/images/new-button}}\\n<$action-sendmessage $message=\\\"tm-notify\\\" $param=\\\"$:/plugins/JR-telmiger/StoryAdmin/confirm-new-category\\\"/>\\n</$set>\\n</$button>\\n</$list>\\n</$set>\"\n        },\n        \"$:/plugins/JR-telmiger/StoryAdmin/confirm-append\": {\n            \"title\": \"$:/plugins/JR-telmiger/StoryAdmin/confirm-append\",\n            \"created\": \"20190109230944170\",\n            \"creator\": \"Thomas Elmiger\",\n            \"modified\": \"20200219130956530\",\n            \"modifier\": \"Thomas Elmiger\",\n            \"tags\": \"\",\n            \"type\": \"text/vnd.tiddlywiki\",\n            \"text\": \"{{$:/plugins/JR-telmiger/StoryAdmin/icon}}\\n\\nStory appended\"\n        },\n        \"$:/plugins/JR-telmiger/StoryAdmin/confirm-load\": {\n            \"title\": \"$:/plugins/JR-telmiger/StoryAdmin/confirm-load\",\n            \"created\": \"20190102215248960\",\n            \"creator\": \"Thomas Elmiger\",\n            \"modified\": \"20200219130956517\",\n            \"modifier\": \"Thomas Elmiger\",\n            \"type\": \"text/vnd.tiddlywiki\",\n            \"text\": \"{{$:/plugins/JR-telmiger/StoryAdmin/icon}}\\n\\nStory loaded\"\n        },\n        \"$:/plugins/JR-telmiger/StoryAdmin/confirm-new-category\": {\n            \"title\": \"$:/plugins/JR-telmiger/StoryAdmin/confirm-new-category\",\n            \"created\": \"20190102215348056\",\n            \"creator\": \"Thomas Elmiger\",\n            \"modified\": \"20200219130956507\",\n            \"modifier\": \"Thomas Elmiger\",\n            \"type\": \"text/vnd.tiddlywiki\",\n            \"text\": \"{{$:/plugins/JR-telmiger/StoryAdmin/icon}}\\n\\nCategory saved\"\n        },\n        \"$:/plugins/JR-telmiger/StoryAdmin/confirm-save\": {\n            \"title\": \"$:/plugins/JR-telmiger/StoryAdmin/confirm-save\",\n            \"created\": \"20190102110437983\",\n            \"creator\": \"Thomas Elmiger\",\n            \"modified\": \"20200219130956499\",\n            \"modifier\": \"Thomas Elmiger\",\n            \"type\": \"text/vnd.tiddlywiki\",\n            \"text\": \"{{$:/plugins/JR-telmiger/StoryAdmin/icon}}\\n\\nStory saved\"\n        },\n        \"$:/plugins/JR-telmiger/StoryAdmin/icon\": {\n            \"title\": \"$:/plugins/JR-telmiger/StoryAdmin/icon\",\n            \"created\": \"20150616003850226\",\n            \"creator\": \"Birthe\",\n            \"modified\": \"20200219130956489\",\n            \"modifier\": \"Thomas Elmiger\",\n            \"origin\": \"Birthe\",\n            \"type\": \"text/vnd.tiddlywiki\",\n            \"text\": \"<svg class=\\\"tc-image tc-image-button tc-image-Alist-button\\\"  width=\\\"22pt\\\" height=\\\"22pt\\\" viewBox=\\\"0 0 414 390\\\" enable-background=\\\"new 0 0 512 512\\\" xml:space=\\\"preserve\\\">\\n     <path\\n     id=\\\"tiddler-stack-icon\\\"\\n     d=\\\"m 90,0 0,300 320,0 L 412,0 90,0 Z M 362,248 l -220,0 0,-150 220,0 0,150 z m 0,140 0,-50 -312,0 0,-242 -50,0 0,292 362,0 z\\\"/>\\n</svg>\"\n        },\n        \"$:/plugins/JR-telmiger/StoryAdmin/load\": {\n            \"title\": \"$:/plugins/JR-telmiger/StoryAdmin/load\",\n            \"caption\": \"StoryAdmin Load\",\n            \"created\": \"20160603122604407\",\n            \"creator\": \"JR\",\n            \"modified\": \"20200219130956480\",\n            \"modifier\": \"Thomas Elmiger\",\n            \"tags\": \"$:/tags/Macro\",\n            \"type\": \"text/vnd.tiddlywiki\",\n            \"text\": \"\\\\define loadStoryButton() <$macrocall $name=\\\"loadStoryBtn\\\" snap={{!!title}}/>\\n\\n\\\\define loadStoryBtn(snap)\\n<$list filter=\\\"\\\"\\\"[<__snap__>has[story]]\\\"\\\"\\\" emptyMessage=\\\"Story not found.\\\">\\n<$button class=\\\"tc-btn-invisible\\\">\\n<$action-setfield $tiddler=\\\"$:/StoryList\\\" list={{{ [<__snap__>get[story]] }}}/>{{$:/plugins/JR-telmiger/StoryAdmin/icon}} Load: <$set name=\\\"tv-wikilinks\\\" value=\\\"no\\\">//$snap$//</$set>\\n<$action-setfield $tiddler=\\\"$:/plugins/JR-telmiger/StoryAdmin/settings\\\" $index=\\\"save-storyname\\\" $value=<<__snap__>>/>\\n<$action-setfield $tiddler=\\\"$:/plugins/JR-telmiger/StoryAdmin/settings\\\" $index=\\\"save-storycat\\\" $value=$(storycat)$/>\\n<$action-navigate $to={{{ [list[$:/StoryList]first[]] }}}/>\\n<$action-sendmessage $message=\\\"tm-notify\\\" $param=\\\"$:/plugins/JR-telmiger/StoryAdmin/confirm-load\\\"/>\\n</$button>\\n</$list>\\n\\\\end\\n\\n\\\\define chooseCat(index)\\n<span title=\\\"Select category/tag\\\"><$select tiddler=\\\"$:/plugins/JR-telmiger/StoryAdmin/settings\\\" index=<<__index__>> default=\\\"select a category\\\">\\n<$list filter=\\\"[tag{$:/plugins/JR-telmiger/StoryAdmin/settings##story-tag}]\\\" variable=\\\"currentIndex\\\">\\n<option value=<<currentIndex>>><<currentIndex>></option>\\n</$list>\\n</$select>\\n</span>\\n\\\\end\\n\\n\\\\define chooseStory(index)\\n<span title=\\\"Select story\\\"><$select tiddler=\\\"$:/plugins/JR-telmiger/StoryAdmin/settings\\\" index=<<__index__>> default=\\\"select a story\\\">\\n<$list filter=\\\"[tag[$(storycat)$]has[story]]\\\" variable=\\\"currentIndex\\\">\\n<option value=<<currentIndex>>><<currentIndex>></option>\\n</$list>\\n</$select>\\n</span>\\n\\\\end\\n\\n<$set name=\\\"snap\\\" value={{$:/plugins/JR-telmiger/StoryAdmin/settings##load-storyname}}>\\n<$set name=\\\"storycat\\\" value={{$:/plugins/JR-telmiger/StoryAdmin/settings##load-storycat}}>\\n\\n<<chooseCat \\\"load-storycat\\\">>\\n\\n<<chooseStory \\\"load-storyname\\\">>\\n\\n<$macrocall $name=\\\"loadStoryBtn\\\" snap=<<snap>>/>\\n\\n</$set>\\n</$set>\"\n        },\n        \"$:/plugins/JR-telmiger/StoryAdmin/readme\": {\n            \"title\": \"$:/plugins/JR-telmiger/StoryAdmin/readme\",\n            \"created\": \"20190102190045713\",\n            \"creator\": \"Thomas Elmiger\",\n            \"modified\": \"20200219130956471\",\n            \"modifier\": \"Thomas Elmiger\",\n            \"type\": \"text/vnd.tiddlywiki\",\n            \"text\": \"!! Story Admin\\n\\nThis plugin is based on [[slidesnstories|http://slidesnstories.tiddlyspot.com/#%24%3A%2Fplugins%2FJR%2Fslidesnstories]] by Jan (JR). While the slides part was removed, some new features for dealing with stories were added.\\n\\n\\n!!! Admin panel\\n\\n<$checkbox tiddler=\\\"$:/plugins/JR-telmiger/StoryAdmin/tab\\\" tag=\\\"$:/tags/SideBar\\\"> Show tab in sidebar</$checkbox>\\n\\n\\n!!! Categories\\n\\nEvery story is saved as an entry in a category. (Technically: as a tiddler tagged with the respective category.)\\n\\n<label>''Top category tag:'' <$edit-text tiddler=\\\"$:/plugins/JR-telmiger/StoryAdmin/settings\\\" index=\\\"story-tag\\\" size=\\\"20\\\" tag=\\\"input\\\"/></label>\\n\\nClick the top category tag to see the available Categories: <$macrocall $name=\\\"tag\\\" tag={{$:/plugins/JR-telmiger/StoryAdmin/settings##story-tag}}/>\\n\\nTo add a category, create a tiddler with this tag. Or add a category here: \\n\\n{{$:/plugins/JR-telmiger/StoryAdmin/category-new}}\\n\\n!! Story Admin Macros\\n\\n!!! Button to load a story\\n\\nReplace the current story with the tiddlers saved in field //story// of a tiddler titled //Tiddler Title//:\\n\\n`<<loadStoryBtn \\\"Tiddler Title\\\">>`\\n\\nor as a macro call:\\n\\n```\\n<$macrocall $name=\\\"loadStoryBtn\\\" snap=\\\"Tiddler Title\\\"/>\\n```\\n\\nShortcut for the tiddler the macro is in: \\n\\n`<<loadStoryButton>>` uses `{{!!title}}`\\n\\n\\nIf there is no story, these macros return an error message.\\n\\n!!! Button to append a story\\n\\nAdd the tiddlers saved in field //story// of a tiddler titled //Tiddler Title// to the bottom of the story:\\n\\n`<<appendStoryBtn \\\"Tiddler Title\\\">>`\\n\\nAlso works as a macro call (see above).\\n\\nIf there is no story, this macro returns a hidden error message (invisible HTML span).\\n\\n\\n\"\n        },\n        \"$:/plugins/JR-telmiger/StoryAdmin/save\": {\n            \"title\": \"$:/plugins/JR-telmiger/StoryAdmin/save\",\n            \"caption\": \"StoryAdmin Save\",\n            \"created\": \"20160721203846694\",\n            \"creator\": \"JR\",\n            \"modified\": \"20200219130956429\",\n            \"modifier\": \"Thomas Elmiger\",\n            \"tags\": \"$:/tags/Macro\",\n            \"type\": \"text/vnd.tiddlywiki\",\n            \"text\": \"\\\\define saveStoryBtn()\\n<$button>\\n<$set name=\\\"cat\\\" value={{$:/plugins/JR-telmiger/StoryAdmin/settings##save-storycat}}>\\n<$set name=\\\"myStory\\\" filter=\\\"[list[$:/StoryList]!tag[excludeStory]]\\\" >\\n<$action-setfield $tiddler=\\\"$(snapshot)$\\\" $field=\\\"story\\\" $value=<<myStory>>/>\\n<$fieldmangler tiddler=\\\"$(snapshot)$\\\">\\n<$action-sendmessage $message=\\\"tm-add-tag\\\" $param=<<cat>>/>\\n</$fieldmangler>\\n<$action-sendmessage $message=\\\"tm-notify\\\" $param=\\\"$:/plugins/JR-telmiger/StoryAdmin/confirm-save\\\"/>\\n<$list filter=\\\"[[$(snapshot)$]!has[title]]\\\" emptyMessage=\\\"Yes, update\\\">\\nSave\\n</$list>\\n</$set>\\n</$set>\\n</$button>\\n\\\\end\\n\\n\\\\define saveStoryBox()\\n<$list filter=\\\"[field:title{$:/plugins/JR-telmiger/StoryAdmin/settings##save-storyname}has[story]]\\\" emptyMessage=<<saveStoryBtn>> >\\n<div class=\\\"savewarning\\\">\\nReplace existing story in <br>\\n<$link><$view field=\\\"title\\\"/></$link>?\\n<br>\\n<<saveStoryBtn>>\\n</div>\\n</$list>\\n\\\\end\\n\\n<label>Save in category: <<chooseCat \\\"save-storycat\\\">></label>\\n\\n<label>Name: <$edit-text tag=\\\"input\\\" tiddler=\\\"$:/plugins/JR-telmiger/StoryAdmin/settings\\\" index=\\\"save-storyname\\\"/></label>\\n\\n<$set name=\\\"snapshot\\\" value={{$:/plugins/JR-telmiger/StoryAdmin/settings##save-storyname}}>\\n<div class=\\\"savebox\\\">\\n<<saveStoryBox>>\\n</div>\\n</$set>\\n\"\n        },\n        \"$:/plugins/JR-telmiger/StoryAdmin/settings\": {\n            \"title\": \"$:/plugins/JR-telmiger/StoryAdmin/settings\",\n            \"text\": \"load-storycat:\\nload-storyname:\\nsave-storycat:\\nsave-storyname:\\nstory-tag: TableOfContents\\nnew-category: \",\n            \"type\": \"application/x-tiddler-dictionary\",\n            \"caption\": \"StoryAdmin Settings\",\n            \"created\": \"20181231160451649\",\n            \"creator\": \"Thomas Elmiger\",\n            \"modified\": \"20200219130956419\",\n            \"modifier\": \"Thomas Elmiger\"\n        },\n        \"$:/plugins/JR-telmiger/StoryAdmin/tab\": {\n            \"title\": \"$:/plugins/JR-telmiger/StoryAdmin/tab\",\n            \"caption\": \"{{$:/plugins/JR-telmiger/StoryAdmin/icon}} Admin\",\n            \"created\": \"20160527011630710\",\n            \"creator\": \"JR\",\n            \"modified\": \"20200219130956402\",\n            \"modifier\": \"Thomas Elmiger\",\n            \"tags\": \"\",\n            \"type\": \"text/vnd.tiddlywiki\",\n            \"text\": \"<div class=\\\"story-manager\\\">\\n\\n!!! Load story\\n\\n{{$:/plugins/JR-telmiger/StoryAdmin/load}}\\n{{$:/plugins/JR-telmiger/StoryAdmin/append}}\\n\\n</div>\\n<div class=\\\"story-manager\\\">\\n\\n!!! Save story\\n\\n{{$:/plugins/JR-telmiger/StoryAdmin/save}}\\n\\n</div>\\n\\n!!! Stories overview\\n\\n<div class=\\\"tc-table-of-contents\\\">\\n\\n<$macrocall $name=\\\"toc-selective-expandable\\\" tag={{$:/plugins/JR-telmiger/StoryAdmin/settings##story-tag}}/>\\n\\n</div>\\n\\nUse the arrow icon to expand a category.\\n\\n<div class=\\\"story-manager\\\">\\n\\n!!! Add category\\n\\n{{$:/plugins/JR-telmiger/StoryAdmin/category-new}}\\n\\n</div>\\n\"\n        }\n    }\n}"}